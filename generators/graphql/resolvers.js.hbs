import { UserInputError, AuthenticationError } from 'apollo-server-micro';
import {{camelCase name}}Service from './{{camelCase name}}.service';

let {{camelCase name}};

const {{camelCase name}}Resolvers = {
  Query: {
    {{camelCase name}}s: async () => {
      try {
        const {{camelCase name}}s = await {{camelCase name}}Service.get();
        return {{camelCase name}}s;
      } catch (error) {
        throw new UserInputError('Wrong input provided', {
          message: error.message,
          stack: error.stack
        });
      }
    },
    {{camelCase name}}: async (root, { _id }) => {
      try {
        {{camelCase name}} = await {{camelCase name}}Service.single({
          qr: {
            _id
          }
        });
        return {{camelCase name}};
      } catch (error) {
        throw new UserInputError('Wrong input provided', {
          message: error.message,
          stack: error.stack
        });
      }
    }
  },
  Mutation: {
    {{camelCase name}}Create: async (root, { content }) => {
      try {
        {{camelCase name}} = await {{camelCase name}}Service.create({
          content
        });
        return {{camelCase name}};
      } catch (error) {
        throw new UserInputError('Wrong input provided', {
          message: error.message,
          stack: error.stack
        });
      }
    },
    {{camelCase name}}Update: async (root, { _id, content }) => {
      try {
        {{camelCase name}} = await {{camelCase name}}Service.put({
          params: {
            qr: {
              _id
            }
          },
          body: {
            content
          }
        });
        return {{camelCase name}};
      } catch (error) {
        throw new UserInputError('Wrong input provided', {
          message: error.message,
          stack: error.stack
        });
      }
    },
    {{camelCase name}}Delete: async (root, { _id }) => {
      try {
        {{camelCase name}} = await {{camelCase name}}Service.delete({
          params: {
            qr: {
              _id
            }
          }
        });
        return {{camelCase name}};
      } catch (error) {
        throw new UserInputError('Wrong input provided', {
          message: error.message,
          stack: error.stack
        });
      }
    }
  }
};

export default {{camelCase name}}Resolvers;
